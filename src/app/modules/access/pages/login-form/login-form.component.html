<div *ngIf="showSpinner == true; else theContent" class="d-flex flex-column">
    <app-spinner id="login-form-spinner" [message]="message"></app-spinner>
</div>
<ng-template #theContent>
    <div id="login-panel">
        <div class="my-3 px-0 px-lg-5 pb-2 pt-4">
            <div class="p-3">
                <div class="text-center h1 text-white font-weight-bold no-text-wrap">
                    Welcome to the Learning & Employment Wallet
                </div>

                <div *ngIf="infoMessage; else noInfoMesssage" class="alert alert-info mt-4">
                    {{ infoMessage }}
                </div>
                <ng-template #noInfoMesssage>
                    <div class="mt-4 mb-4 text-center text-white">Please login below to view your profile.</div>
                </ng-template>
            </div>

            <div>
                <div class="px-3">
                    <form #f="ngForm" (ngSubmit)="login(f)">
                        <div [ngClass]="{ 'alert alert-danger mt-2': modelErrors.length > 0 }">
                            <span *ngFor="let msg of modelErrors">{{ msg }}</span>
                        </div>
                        <div class="input-group">
                            <small [hidden]="email.valid || (email.pristine && !submitted)" class="alert alert-danger"
                                >Please enter a valid email</small
                            >
                        </div>

                        <div class="input-group my-3">
                            <input
                                id="email"
                                type="text"
                                required
                                name="email"
                                class="form-control"
                                placeholder="Username"
                                [ngModel]="credentials.email"
                                #email="ngModel"
                                tmFocus
                                validateEmail
                            />
                        </div>
                        <div class="input-group mb-3">
                            <input
                                type="password"
                                class="form-control"
                                id="password"
                                required
                                name="password"
                                placeholder="Password"
                                [ngModel]="credentials.password"
                            />
                        </div>

                        <div class="mt-4 mb-2 text-center">
                            <button type="submit" class="btn btn-primary" [disabled]="loginSpinner">
                                Login
                                <span
                                    class="spinner-border spinner-border-sm"
                                    role="status"
                                    *ngIf="loginSpinner"
                                    aria-hidden="true"
                                ></span>
                            </button>
                        </div>

                        <div class="d-none d-sm-flex mt-5 row">
                            <div class="col">
                                <div class="text-center">
                                    <a
                                        id="forgot-password"
                                        class="underline-link"
                                        [routerLink]="['/access/forgot-password']"
                                        >Forgot My Password</a
                                    >
                                </div>
                            </div>
                            <div class="col">
                                <div class="text-center d-flex gap-2">
                                    <a class="underline-link" [href]="termsOfServiceUrl" target="_blank"
                                        >Terms of Service</a
                                    >

                                    <a
                                        class="underline-link"
                                        href="#"
                                        target="_blank"
                                        >EULA</a
                                    >
                                </div>
                            </div>
                        </div>

                        <div class="d-block d-sm-none mt-5 row">
                            <div class="d-flex flex-column gap-4">
                                <div class="text-center">
                                    <a
                                        id="forgot-password"
                                        class="underline-link"
                                        [routerLink]="['/access/forgot-password']"
                                        >Forgot My Password</a
                                    >
                                </div>

                                <div class="d-flex gap-4 justify-content-center">
                                    <div class="text-center">
                                        <a class="underline-link" [href]="termsOfServiceUrl" target="_blank"
                                            >Terms of Service</a
                                        >
                                    </div>

                                    <div class="text-center">
                                        <a
                                            class="underline-link"
                                            href="#"
                                            target="_blank"
                                            >EULA</a
                                        >
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</ng-template>
